<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>Simulasi F = m·a (Mobil) — Web App (Drag & RK4)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <h1>Simulasi F = m·a dengan Gesekan — Mobil (Drag & Integrator RK4)</h1>

  <div class="panel" id="controls">
    <div class="control-col">
      <label>Mass (m) — kg</label>
      <div class="row">
        <input id="massNum" type="number" min="0.1" step="0.1" value="1200">
        <span class="small">kg (mis. 1200 = sedan)</span>
      </div>
    </div>

    <div class="control-col">
      <label>Gaya dorong / tarik F (N)</label>
      <div class="row">
        <input id="forceRange" type="range" min="-4000" max="4000" step="10" value="0">
        <input id="forceNum" type="number" step="1" value="0">
      </div>
      <div class="small">Negatif = tarik/kiri, Positif = dorong/kanan</div>
    </div>

    <div class="control-col">
      <label>Koefisien gesekan μ (kinetik / statis sederhana)</label>
      <div class="row">
        <input id="muRange" type="range" min="0" max="1" step="0.01" value="0.12">
        <input id="muNum" type="number" step="0.01" min="0" max="1" value="0.12">
      </div>
    </div>

    <div class="control-col">
      <label>Kecepatan v (m/s)</label>
      <div class="row">
        <input id="vRange" type="range" min="-50" max="50" step="0.1" value="0">
        <input id="vNum" type="number" step="0.1" value="0">
      </div>
      <div class="small">Ubah untuk langsung mengatur kecepatan mobil (bisa saat simulasi berjalan)</div>
    </div>

    <div class="control-col">
      <label>Drag udara (aerodinamis)</label>
      <div class="row">
        <label style="font-size:12px;"><input type="checkbox" id="dragToggle"> Aktifkan drag</label>
        <select id="dragModel">
          <option value="quadratic">Quadratic: 0.5·ρ·Cd·A·v·|v|</option>
          <option value="linear">Linear: -k·v</option>
        </select>
      </div>
      <div class="row small">
        <label>ρ (kg/m³): <input id="rhoNum" type="number" step="0.01" value="1.225" style="width:80px"></label>
        <label>Cd: <input id="cdNum" type="number" step="0.01" value="0.32" style="width:70px"></label>
        <label>A(m²): <input id="areaNum" type="number" step="0.01" value="2.2" style="width:70px"></label>
        <label style="margin-left:8px">k (N·s/m): <input id="kNum" type="number" step="0.1" value="12" style="width:70px"></label>
      </div>
      <div class="small">Model quadratic mendekati hambatan udara nyata pada kecepatan tinggi. Linear adalah opsi sederhana.</div>
    </div>

    <div class="control-col">
      <label>Integrator numerik</label>
      <div class="row">
        <select id="integratorSelect">
          <option value="euler">Euler (cepat, kasar)</option>
          <option value="rk4" selected>RK4 (lebih akurat)</option>
        </select>
        <span class="small" style="margin-left:8px">Pilih metode integrasi</span>
      </div>
    </div>

    <div style="display:flex; flex-direction:column; gap:6px;">
      <label style="font-size:13px;"><input type="checkbox" id="frictionToggle" checked> Aktifkan gaya gesekan</label>
      <div style="display:flex; gap:8px; align-items:center;">
        <button id="startBtn" class="primary">Mulai</button>
        <button id="pauseBtn">Jeda</button>
        <button id="resetBtn">Reset</button>
        <button id="clearPlotBtn">Bersihkan Grafik</button>
        <select id="exportMode">
          <option value="all">Ekspor: Semua data</option>
          <option value="window">Ekspor: Jendela tampilan</option>
        </select>
        <button id="exportCsvBtn">Ekspor CSV</button>
      </div>
    </div>
  </div>

  <div class="panel" style="margin-top:12px;">
    <canvas id="simCanvas" width="1000" height="260"></canvas>
    <div style="display:flex; gap:12px; margin-top:10px; align-items:center; flex-wrap:wrap;">
      <div class="stat">t = <span id="tVal">0.00</span> s</div>
      <div class="stat">x = <span id="xVal">0.00</span> m</div>
      <div class="stat">v = <span id="vDisplay">0.00</span> m/s</div>
      <div class="stat">a = <span id="aVal">0.00</span> m/s²</div>
    </div>

    <div style="margin-top:8px; font-size:13px; color:#333;">
      Gaya gesekan maksimum: F_fric_max = μ · m · g. Drag udara (jika aktif) ditambahkan ke gaya total. Anda dapat memilih integrator numerik (Euler atau RK4).
    </div>

    <div style="margin-top:8px; font-size:13px; color:#333;">
      Debug / gaya: F_applied = <span id="FaVal">0</span> N · F_gesek = <span id="FfVal">0</span> N · F_drag = <span id="FdragVal">0</span> N · F_net = <span id="FnetVal">0</span> N
    </div>
  </div>

  <div class="plots">
    <div class="plotPanel" style="flex:1; min-width:320px;">
      <div class="plot-title">x(t) — Posisi terhadap waktu (m)</div>
      <canvas id="plotX" class="plot" width="1000" height="160"></canvas>
      <div class="controls-row small-muted">Window: <span id="winSecDisplay">12</span> s · Sampel/frame (variabel)</div>
    </div>

    <div class="plotPanel" style="flex:1; min-width:320px;">
      <div class="plot-title">v(t) — Kecepatan terhadap waktu (m/s)</div>
      <canvas id="plotV" class="plot" width="1000" height="160"></canvas>
      <div class="controls-row small-muted">Skala otomatis berdasarkan jendela waktu</div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>